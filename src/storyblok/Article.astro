---
import Comments from '@components/Comments';
import PostHeader from '@components/PostHeader.astro';
import PostThumbnail from '@components/PostThumbnail.astro';
import { storyblokEditable, renderRichText } from '@storyblok/astro';
import readingTime from 'reading-time';

const { blok } = Astro.props;
const renderedRichText = renderRichText(blok.content);
const minutesToRead = readingTime(renderedRichText);

---

<article {...storyblokEditable(blok)} class="">
  <PostHeader
    title={blok.title}
    description={blok.teaser}
    pubDate={blok.pubDate}
    tags={blok.tags}
    minutesRead={minutesToRead.text}
  />
  <PostThumbnail
    image={`${blok.image.filename}/m/1600x0`}
    alt={blok.image.alt}
  />
  <div
    class="prose mx-auto my-4 w-full items-center text-base leading-10 text-content dark:prose-invert lg:max-w-5xl lg:text-xl"
    set:html={renderedRichText}
  />
  <Comments client:idle />
</article>
