---
import Comments from '@components/Post/Comments.astro';
import PostHeader from '@components/Post/PostHeader.astro';
import PostThumbnail from '@components/Post/PostThumbnail.astro';
import Toc from '@components/Toc/Toc.astro';
import '@styles/typograpy.css';
import type { TocHeading } from '@utils/types';
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';

type Props = CollectionEntry<'blog'>['data'] & {
  ogImage: string;
  minutesToRead: number;
  isHeadings: boolean;
  headings: TocHeading[];
  currentUrl: string;
};

const {
  title,
  description,
  publishedDate,
  tags,
  category,
  cover,
  ogImage,
  minutesToRead,
  isHeadings,
  headings,
  link,
  currentUrl,
} = Astro.props;
---

<BaseLayout>
  <PostHeader
    category={category}
    minutesToRead={minutesToRead}
    title={title}
    description={description}
    publishedDate={publishedDate}
    tags={tags}
    link={currentUrl}
  />
  {isHeadings && <Toc headings={headings} />}
  <article class="prose">
    {
      category === 'Project' && cover && (
        <PostThumbnail image={cover} alt={title} link={link} />
      )
    }
    <slot />
    <Comments />
  </article>
</BaseLayout>
