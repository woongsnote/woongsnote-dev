---
import Base from '@layouts/Base.astro';
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import PostHeader from '@components/PostHeader.astro';
import Comments from '@components/react/Comments';

type Props = CollectionEntry<'blog'>['data'] & { minutesRead: any };

const { title, description, pubDate, heroImage, tags, minutesRead } =
  Astro.props;
---

<Base meta_title={title} description={description} image={heroImage} blogpost>
  <article class="p-4">
    <PostHeader
      title={title}
      pubDate={pubDate}
      tags={tags}
      minutesRead={minutesRead}
    />
    <div class="mx-auto my-2 overflow-hidden rounded-xl shadow-sm">
      {
        heroImage && (
          <figure class="mx-auto h-auto w-auto object-cover">
            <Image
              src={heroImage}
              alt={title}
              width={960}
              height={480}
              quality={'high'}
            />
          </figure>
        )
      }
    </div>
    <div
      class="prose mx-auto my-4 w-full items-center text-base leading-10 text-content dark:prose-invert lg:max-w-5xl lg:text-xl"
    >
      <slot />
    </div>
    <Comments client:idle />
  </article>
</Base>
