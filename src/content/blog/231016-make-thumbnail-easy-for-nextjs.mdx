---
title: 'Next.js ë¸”ë¡œê·¸ì—ì„œ ì„¬ë„¤ì¼ ì´ë¯¸ì§€ ì‰½ê²Œ ìƒì„±í•˜ê¸°'
description: 'Vercel/ogë¥¼ ì‚¬ìš©í•´ì„œ ì„¬ë„¤ì¼ê³¼ OG(Open Graph) imageë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•'
cover: '../../assets/blog-placeholder.jpg'
publishedDate: '2023-10-16'
category: 'Tech'
author: 'woongsnote'
tags: ['Nextjs', 'thumbnail','OgImage','Vercel']
slug: 'make-thumbnail-easy-for-nextjs'
---


## ì„¬ë„¤ì¼, ë§¤ë²ˆ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ê°€..?

ë¸”ë¡œê·¸ì— ê¸€ì„ ì‘ì„±í•  ë•Œ, ì„¬ë„¤ì¼(thumbnail)ì„ ë§¤ë²ˆ ì§ì ‘ ë§Œë“œëŠ” ê²ƒì€ ë²ˆê±°ë¡œìš´ ì‘ì—…ì´ë‹¤.

[ë¯¸ë‹ˆí”½](https://mini-pick.vercel.app)ì´ë¼ëŠ” í”„ë¡œì íŠ¸ë¥¼ í†µí•´, ì„¬ë„¤ì¼ì„ ì§ì ‘ ë§Œë“¤ì—ˆì§€ë§Œ, ì œëª© ë“±ì„ ì§ì ‘ ì…ë ¥í•´ì•¼ í•˜ë¯€ë¡œ, ì¶”ê°€ì ì¸ ì‘ì—… ì‹œê°„ì´ ì†Œìš”ëœë‹¤ëŠ” ì ì„ ê°œì„ í•  í•„ìš”ê°€ ìˆì—ˆë‹¤.

`@vercel/og` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•´ì„œ, í¬ìŠ¤íŠ¸ ì œëª©ì— ëŒ€í•´ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ë„ë¡ í•´ì„œ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

## ì–´ë–»ê²Œ ë§Œë“¤ì—ˆëŠ”ê°€?

Next.js 13ì˜ app routerë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ, `@vercel/og`ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.

ë¨¼ì €, app ë””ë ‰í† ë¦¬ì— og í´ë”ë¥¼ ë§Œë“¤ê³ , route.tsx íŒŒì¼ì„ ìƒì„±í•˜ê³ , ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í–ˆë‹¤.

```tsx
import { ImageResponse } from 'next/server';

export const runtime = 'edge';

export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url);

    const hasTitle = searchParams.has('title');
    const title = hasTitle
      ? searchParams.get('title')?.slice(0, 100)
      : 'Woongsnote';

    const size = { width: 1200, height: 630 };

    return new ImageResponse(
      (
        <div
          style={{
            height: '100%',
            width: '100%',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            backgroundImage:
              'linear-gradient(to bottom right, #00C0FF, #4218B8)',
            fontSize: 64,
            fontWeight: 600,
          }}
        >
          <div style={{ color: 'white' }}>{title}</div>
        </div>
      ),
      {
        ...size,
      },
    );
  } catch (error) {
    return new Response(`Failed to generate the Image`, { status: 500 });
  }
}
```

ê·¸ë¦¬ê³ , Metadata ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì—ì„œ ì•„ë˜ì™€ ê°™ì´ í˜¸ì¶œí•˜ë©´ ëœë‹¤.

```tsx

...
    openGraph: {
      images: [
        {
          url: `/og?title=${post.title}`,
          width: 1200,
          height: 630,
          alt: post.title,
        },
      ],
    },
...

```

## ì´ ì´ë¯¸ì§€ë¥¼ ì„¬ë„¤ì¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€?

Local ìƒíƒœì—ì„œ `yarn build && yarn start`ë¡œ buildí•´ì„œ testí–ˆì„ ë•ŒëŠ”, ì„¬ë„¤ì¼ì´ ì •ìƒì ìœ¼ë¡œ ë‚˜ì™”ì—ˆë‹¤.

í•˜ì§€ë§Œ, ë°°í¬í•˜ê³  ë‚˜ì„œ ì ‘ì†í–ˆì„ ë•ŒëŠ”, **400** Errorë¥¼ ë§ˆì£¼í•˜ê²Œ ë˜ì—ˆë‹¤.

í•´ë‹¹ ì—ëŸ¬ì— ëŒ€í•´ ê²€ìƒ‰í•´ ë³¸ ê²°ê³¼, ì´ë¯¸ì§€ ì£¼ì†Œì˜ Remote Pattternì´ ë¹ ì¡ŒìŒì„ ì•Œì•˜ë‹¤.

`next.config.js` íŒŒì¼ì— ì•„ë˜ì™€ ê°™ì´ image ì£¼ì†Œì˜ Remote patternì„ ì¶”ê°€í•˜ê³ ,

```js
      {
        protocol: 'https',
        hostname: 'ë°°í¬í•œ url ì£¼ì†Œ',
        port: '',
        pathname: '/og/**',
      },
```

ì„¬ë„¤ì¼ ì´ë¯¸ì§€ì˜ srcì˜ ê²½ë¡œë¥¼ `/og?title=${title}`ì—ì„œ `${"ë°°í¬í•œ url ì£¼ì†Œ"}/og?title=${title}` ë¡œ ìˆ˜ì • í›„ ë‹¤ì‹œ ë°°í¬í–ˆê³ , í˜„ì¬ëŠ” ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤. ğŸ˜Š

---

- ì°¸ê³  ìë£Œ: [ê³µì‹ ë¬¸ì„œ](https://vercel.com/docs/functions/edge-functions/og-image-generation)