---
import { getCollection } from 'astro:content';
import Base from '@layouts/Base.astro';
import PageHeader from '@components/PageHeader.astro';
import TagItem from '@components/TagItem.astro';

const allPosts = await getCollection('blog');
const uniqueTags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
const title = '모든 태그 모음';
const description =
  '태그를 선택하시면 해당 태그가 포함된 게시글 목록을 확인하실 수 있습니다.';
---

<Base pageTitle={title}>
  <PageHeader title={title} description={description} />
  <section class="mt-4 flex flex-wrap gap-8">
    {uniqueTags.map((tag) => <TagItem title={tag} url={`/tags/${tag}`} />)}
  </section>
</Base>
