---
import { getCollection, type CollectionEntry } from 'astro:content';
import config from '@config/site-config';
import Base from '@layouts/Base.astro';
import Posts from '@layouts/Posts.astro';
import Hero from '@components/Hero/Hero.astro';
import ViewMore from '@components/Page/ViewMore.astro';
import { sortPostsByDateDesc } from '@utils/data-util';

const allPosts = await getCollection('posts');
const recentPosts: CollectionEntry<'posts'>[] = allPosts
  .sort(sortPostsByDateDesc)
  .slice(0, config.site.pageSize);
---

<Base pageTitle="Home">
  <Hero />
  <Posts posts={recentPosts} pageSize={config.site.pageSize} />
  <ViewMore />
</Base>
