---
import { Logo, ThemeToggle } from '@/components/ui';
import HeaderDesktopNav from './HeaderDesktopNav.astro';
import HeaderMobileNav from './HeaderMobileNav.astro';
import { getHeaderLinkInfo } from './useHeaderLink';

const { pathname } = Astro.url;

const linkInfo = getHeaderLinkInfo(pathname);
---

<header
  role="banner"
  class="bg-background/80 border-header/50 sticky top-0 z-10 mx-auto w-full max-w-3xl border-b px-4 backdrop-blur-md lg:px-0"
>
  <div class="flex h-14 items-center gap-3">
    <Logo />

    {/* Nav: responsive split (takes remaining space) */}
    <div class="flex flex-1 items-center justify-end sm:justify-end">
      {/* Mobile (< sm) */}
      <div class="sm:hidden">
        <HeaderMobileNav linkInfo={linkInfo} />
      </div>

      {/* Desktop (>= sm) */}
      <div class="hidden sm:block">
        <HeaderDesktopNav linkInfo={linkInfo} />
      </div>
    </div>

    {/* Right actions: divider + theme toggle (render once) */}
    <div class="flex items-center gap-2">
      <span class="bg-header/40 h-5 w-px" aria-hidden="true"></span>
      <ThemeToggle />
    </div>
  </div>
</header>
