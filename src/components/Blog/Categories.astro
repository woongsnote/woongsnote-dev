---
import { CATEGORIES } from '@config/site-config';

type Props = {
  currentPage: string;
  categoryCounts: Record<string, number>;
};

const { currentPage, categoryCounts } = Astro.props;

const getCategoryButtonClass = (isActive: boolean): string => {
  return `btn btn-sm transition-all duration-200 px-2 ${
    isActive ? 'btn-accent' : 'btn-outline hover:btn-accent'
  }`;
};

const getCountChipClass = (isActive: boolean): string => {
  return `badge badge-sm
   ${isActive ? 'badge-accent-content text-accent' : 'badge-outline'}`;
};
---

<div class="mb-8 flex flex-wrap gap-2 text-sm">
  {
    CATEGORIES.map(({ page, title, href }) => {
      const key = page || 'all';
      const count = categoryCounts[key] || 0;
      const isActive = currentPage === key;
      return (
        <a href={href} class={getCategoryButtonClass(isActive)}>
          {title}
          <h2 class={getCountChipClass(isActive)}>{count}</h2>
        </a>
      );
    })
  }
</div>
