---
import { CATEGORIES } from '@config/site-config';

type Props = {
  currentPage: string;
  categoryCounts: Record<string, number>;
};

const { currentPage, categoryCounts } = Astro.props;

const getCategoryButtonClass = (isActive: boolean): string => {
  return `btn btn-sm md:btn-md transition-all duration-200 px-2 ${
    isActive
      ? 'bg-black text-white hover:bg-gray-800'
      : 'bg-white text-black border-black hover:bg-gray-100'
  }`;
};

const getCountChipClass = (isActive: boolean): string => {
  return `badge badge-sm ${
    isActive ? 'bg-white text-black' : 'bg-black text-white'
  }`;
};
---

<div class="mb-8 flex flex-wrap gap-2 text-sm">
  {
    CATEGORIES.map(({ page, title, href }) => {
      const key = page || 'all';
      const count = categoryCounts[key] || 0;
      const isActive = currentPage === key;
      return (
        <a href={href} class={getCategoryButtonClass(isActive)}>
          {title}
          <h2 class={getCountChipClass(isActive)}>{count}</h2>
        </a>
      );
    })
  }
</div>
