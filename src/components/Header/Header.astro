---
import { Logo } from '@components/Branding';
import { IconButton } from '@components/Icons';
import ThemeToggle from '@components/ThemeToggle/ThemeToggle.astro';
import HeaderNavLink from './HeaderNavLink.astro';
import { getHeaderLinkInfo } from './useHeaderLink';

const { pathname } = Astro.url;
const linkInfo = getHeaderLinkInfo(pathname);
const LinkIcon = linkInfo.icon;
---

<header
  role="banner"
  class="bg-background/80 border-header/50 sticky top-0 z-10 mx-auto w-full max-w-3xl border-b px-4 backdrop-blur-md lg:px-0"
>
  <div class="flex h-14 items-center justify-between">
    <Logo />

    <nav aria-label="Primary navigation" class="flex items-center gap-3">
      <ThemeToggle />

      <div class="bg-divider h-5 w-px"></div>

      {/* Mobile: icon-only */}
      <div class="sm:hidden">
        <IconButton
          as="a"
          href={linkInfo.href}
          label={linkInfo.text}
          title={linkInfo.description}
        >
          <LinkIcon class="h-5 w-5" />
        </IconButton>
      </div>

      {/* >= sm: text */}
      <div class="hidden sm:block">
        <HeaderNavLink
          href={linkInfo.href}
          text={linkInfo.text}
          description={linkInfo.description}
        />
      </div>
    </nav>
  </div>
</header>
