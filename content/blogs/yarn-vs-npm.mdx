---
title: npm vs yarn vs yarn berry
description: Package Manager 비교
date: 2023-07-31
tags:
  - title: npm
  - title: yarn
  - title: yarn berry
coverImage: https://github.com/woongsnote/woongsnote-dev/assets/83802168/57e7d9b6-e7f8-4183-bae0-7acdfe921f33
---

## **1. 패키지 매니저(Package Manager)란?**

**패키지 매니저**는 소프트웨어 개발 시 사용되는 **패키지(라이브러리, 모듈 등)를 관리하는 도구**다.
소프트웨어 개발에서 많은 외부 라이브러리와 모듈을 사용하게 되는데, 이러한 패키지들을 관리하고 설치하고 업데이트하는 작업을 간편하게 해주는 도구가 패키지 매니저다.
패키지 매니저는 소프트웨어 생태계를 더욱 효율적으로 만들어 주는 중요한 역할을 수행한다. 이 중 JavaScript 패키지 매니저로 많이 쓰이는 **npm**, **yarn**, 그리고 **yarn berry**에 대해 알아보자.

## **2. npm (Node Package Manager)**

- npm은 Node.js 생태계의 표준 패키지 매니저로 가장 오래된 패키지 매니저 중 하나다.
- package.json 파일과 package-lock.json 파일을 통해 프로젝트의 의존성을 관리한다.

### 1) npm의 장점

- Node.js와 함께 설치되므로 별도의 설치 과정이 필요하지 않다.
- 가장 많은 패키지와 호환성을 보장한다.
- npm audit과 같은 보안 기능을 제공한다.

※ **npm audit** - npm audit는 프로젝트의 종속성 트리에 대한 즉각적인 보안 검토를 수행하는 새로운 명령이다. 감사 보고서에는 종속성의 보안 취약성에 대한 정보가 포함되어 있으며 실행하기 쉬운 npm 명령과 추가 문제 해결을 위한 권장 사항을 제공하여 취약성을 해결하는 데 도움이 될 수 있다.

### 2) npm의 단점

- 속도가 느리고 불안정할 수 있다. 예를 들어, npm install 명령어를 실행할 때 네트워크 오류나 의존성 충돌 등이 발생할 수 있다.
- 중복된 패키지를 설치하거나 삭제하는 경우가 있어 디스크 공간을 낭비할 수 있다. 예를 들어, A와 B라는 두 개의 패키지가 C라는 동일한 패키지에 의존하는 경우, npm은 C를 두 번 설치하거나 삭제한다.
- package-lock.json 파일이 다른 환경에서 의존성 문제를 일으킬 수 있다. 예를 들어, Windows와 Linux에서 package-lock.json 파일이 다르게 생성될 수 있다.

## 3. yarn

- yarn은 Facebook에서 npm의 단점을 보완하기 위해 만든 패키지 매니저다.
- yarn은 package.json 파일과 yarn.lock 파일을 통해 프로젝트의 의존성을 관리한다.

### 1) yarn의 장점

- 캐싱과 병렬 다운로드를 통해 속도가 빠르고 안정적이다. 예를 들어, yarn install 명령어를 실행할 때 이미 캐시된 패키지는 다시 다운로드하지 않고 로컬에서 바로 사용한다.
- 중복된 패키지를 플랫하게 설치하여 디스크 공간을 절약한다. 예를 들어, A와 B라는 두 개의 패키지가 C라는 동일한 패키지에 의존하는 경우, yarn은 C를 한 번만 설치하고 A와 B가 공유하도록 한다.
- yarn.lock 파일이 의존성을 정확하게 잠그어준다. 예를 들어, yarn.lock 파일에는 각 패키지의 버전과 체크섬 등이 명시되어 있어서 다른 환경에서도 동일한 결과를 보장한다.
- workspaces와 같은 고급 기능을 제공한다. 예를 들어, workspaces 기능을 사용하면 여러 개의 하위 프로젝트를 하나의 상위 프로젝트로 관리할 수 있다.

### 2) yarn의 단점

- npm보다 적은 패키지와 호환성이 있을 수 있다. 예를 들어, 일부 패키지는 npm 전용 스크립트나 설정을 가지고 있어서 yarn에서는 제대로 작동하지 않을 수 있다.
- 별도의 설치 과정이 필요하다. 예를 들어, yarn을 사용하려면 npm을 통해 yarn을 먼저 설치해야 한다.
  ```bash
  npm install -g yarn
  ```
- 버전 1에서는 보안 기능이 부족하다. 예를 들어, yarn audit 명령어는 npm audit 명령어보다 적은 수의 취약점을 검출한다.

## 4. yarn berry

yarn berry는 yarn의 최신 버전으로, 2.x 이상을 의미한다. yarn berry는 기존의 yarn과는 다른 방식으로 패키지를 관리한다.

### 1) yarn berry의 장점

- Plug'n'Play(PnP) 방식으로 노드 모듈 폴더를 생성하지 않고 메모리에서 패키지를 로드한다. 이는 디스크 공간과 시간을 절약하고 의존성 문제를 줄여준다.
- Zero-Installs 기능으로 프로젝트에 필요한 모든 패키지를 저장소에 포함시켜 별도의 설치 과정이 필요하지 않다. 이는 프로젝트의 재현성과 이식성을 높여준다.
- 버전 2에서는 보안 기능이 강화되었다. 예를 들어, yarn dlx 명령어는 일회성으로 패키지를 실행할 수 있게 해준다.

### 2) yarn berry의 단점

- PnP 방식이 호환되지 않는 패키지나 도구가 있을 수 있다. 예를 들어, 일부 패키지는 노드 모듈 폴더에 접근하거나 수정하는 코드를 가지고 있어서 PnP 방식에서 오류가 발생할 수 있다.
- Zero-Installs 기능이 저장소의 크기를 증가시킬 수 있다. 예를 들어, 프로젝트에 큰 용량의 패키지가 포함되면 저장소의 용량도 커진다.
- 설정이 복잡하고 문서화가 부족하다. 예를 들어, yarn berry를 사용하려면 .yarnrc.yml 파일과 .pnp.js 파일 등을 생성하고 수정해야 한다.

## 5. npm, yarn, yarn berry의 장단점 비교

<table>
  <thead>
    <tr>
      <th>
        패키지
        <br /> 매니저
      </th>
      <th>장점</th>
      <th>단점</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>npm</td>
      <td>
        <ul>
          <li>별도의 설치 과정이 필요하지 않음</li>
          <li>가장 오래된 역사</li>
          <li>많은 패키지 지원</li>
          <li>보안 기능(npm audit)제공</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>속도가 느리고 불안정할 수 있음</li>
          <li>디스크 공간 낭비 가능</li>
          <li>package-lock.json 파일의 환경에 따른 문제 가능</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>yarn</td>
      <td>
        <ul>
          <li>빠른 속도와 안정성</li>
          <li>디스크 공간 절약</li>
          <li>의존성 정확하게 잠금(yarn.lock)</li>
          <li>고급 기능 제공 (예: workspaces)</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>npm보다 적은 패키지와 호환성 가능</li>
          <li>별도의 설치 과정 필요</li>
          <li>버전 1에서는 보안 기능이 미흡할 수 있음</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>yarn berry</td>
      <td>
        <ul>
          <li>Plug'n'Play(PnP) </li>
          <li>별도의 설치 과정 필요 없음</li>
          <li>버전 2에서 강화된 보안 기능</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>PnP 방식 호환되지 않는 패키지나 도구 가능</li>
          <li>Zero-Installs로 인한 저장소 크기 증가 가능</li>
          <li>설정 복잡하고 문서화 부족</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

## **5. 결론**

패키지 매니저는 프로젝트의 성공과 실패에 큰 영향을 미칠 수 있다.
따라서 상황에 맞는 패키지 매니저를 선택하는 것이 중요하다.
npm은 가장 기본적이고 안전한 선택이지만, 속도와 안정성이 떨어질 수 있다.
yarn은 npm보다 개선된 성능과 기능을 제공하지만, 호환성이나 보안에 문제가 있을 수 있다.
yarn berry는 가장 혁신적이고 미래지향적인 패키지 매니저이지만, 아직 완성도가 높지 않다.
각각의 패키지 매니저의 장단점을 잘 파악하고, 프로젝트의 요구사항과 팀의 선호도에 따라 적절한 패키지 매니저를 선택하기 바란다.
